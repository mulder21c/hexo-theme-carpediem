extends /components/templates/common
include /components/atoms/svg-icon/index
include /components/atoms/heading/index
include /components/molecules/article-meta/index
include /components/molecules/author/index
include /components/molecules/tags-list/index
include /components/organisms/hero/index
include /components/organisms/article-content/index
include /components/organisms/disqus/index

block heroContent
  -
    const postHero = (primaryHero && primaryHero.path) ? primaryHero : hero;

  if (postHero)
    +hero(postHero && {imgSrc: postHero.path, class: `${prefix}-home-hero`})

block mainContent
  if post
    article(class= `${prefix}-article`)
      div(class= `${prefix}-article__header`)
        +heading({
          level: 1,
          htmlString: post.title,
          class: `${prefix}-article__heading`,
        })
        +articleMeta({
          categories: post.categories.data || post.categories || [],
          date: post.date,
          updated: post.updated,
        })

      +articleContent({
        content: page.content,
      })

      div(class= `${prefix}-article__tags`)
        +heading({
          level: 2,
          class: `${prefix}-article__tags__heading`,
        })
          +svgIcon({
            name: `tags`,
            "aria-hidden": `false`,
            "aria-label": _p(`section.tags`),
          })
        +tagsList({
          tags: post.tags.data || post.tags || [],
          appearance: `flat`,
          class: `${prefix}-article__tags__list`,
        })

      div(class= `${prefix}-article__author`)
        +heading({
          level: 2,
          htmlString: _p(`section.author`),
          visible: false,
        })
        +articleAuthor({
          name: author.name,
          gravatar: author.gravatar,
          description: author.description,
        })


    if post.comments !== false
      section(class= `${prefix}-article__comments`)
        +heading({
          level: 2,
          htmlString: _p(`section.comments`),
          visible: false,
        })

        if theme.disqus && theme.disqus.shortname
          +disqus({ shortname: theme.disqus.shortname })

block sidebar
